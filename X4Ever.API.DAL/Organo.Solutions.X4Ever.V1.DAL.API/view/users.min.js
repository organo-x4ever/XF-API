$(function(){function r(){$("table[key=data-table] tbody").remove();$(".loading-results").removeClass("hide");$(".div-message").text("");$("button[type=submit]").addClass("disabled")}function i(){$(".loading-results").addClass("hide");$("button[type=submit]").removeClass("disabled")}function u(r){var u="",o;r!==null&&r!=="undefined"&&(u="?showEmptyRecords="+r);o=n+"api/frontend/getusers";jQuery.support.cors=!0;$.ajax({url:o+u,type:"GET",dataType:"json",headers:{Token:t},success:function(n){function t(n){var t=$("#example2 tbody tr");$.each(t,function(t,i){n===!0?($(i).find("button.btn-show-meta").removeClass("disabled"),$(i).find("button.btn-show-tracker").removeClass("disabled")):($(i).find("button.btn-show-meta").addClass("disabled"),$(i).find("button.btn-show-tracker").addClass("disabled"))})}var u=$("#example2").DataTable({data:n,retrieve:!1,paging:!1,lengthChange:!0,searching:!0,ordering:!0,info:!0,autoWidth:!0,search:!0,searchable:!0,pageLength:25,lengthMenu:[[25,50,100,500,1e3],[25,50,100,500,1e3]],order:[[0,"desc"],[1,"asc"],[4,"asc"]],columns:[{data:"UserRegistered"},{data:"UserFirstName"},{data:"UserEmail"},{data:"UserLogin"},{data:"UserApplication"},{data:"ID"}],columnDefs:[{targets:[1],render:function(n,t,i){return n+" "+i.UserLastName}},{targets:[0],render:function(n,t,i){return i.UserRegistered.split("T")[0]+" "+i.UserRegistered.split("T")[1]}},{targets:[5],visible:r===!1,orderable:!1,render:function(){return"<button class='btn btn-sm bg-purple btn-show-meta' type='button'>Show Meta<\/button> <button class='btn btn-sm bg-olive btn-show-tracker' type='button'>Show Tracker<\/button>"}}],tableTools:{aButtons:["copy","print",{sExtends:"collection",sButtonText:"Save",aButtons:["csv","xls","pdf"]}]},destroy:!0});i();r?$(".hideForEmptyRecords").addClass("hidden"):$(".hideForEmptyRecords").removeClass("hidden");$("button[type=button].btn-show-meta").click(function(){var n,i;(console.log("meta"),$(this).hasClass("disabled")!==!0)&&(n=$(this).closest("tr"),n.after($("#table-meta .tr-meta-editor").clone()),$("button.meta-close").click(function(){$(this).closest(".tr-meta-editor").remove();t(!0)}),t(!1),i=u.row($(this).closest("tr")).data(),f(i.ID))});$("button[type=button].btn-show-tracker").click(function(){var n,i;(console.log("tracker"),$(this).hasClass("disabled")!==!0)&&(n=$(this).closest("tr"),n.after($("#table-meta .tr-tracker-editor").clone()),$("button.tracker-close").click(function(){$(this).closest(".tr-tracker-editor").remove();t(!0)}),t(!1),i=u.row($(this).closest("tr")).data(),e(i.ID))})},error:function(n){n.status===401&&basics.logout();$(".div-message").text("Something went wrong. Unable to fetch data.");i()}})}function f(r){var u=n+"api/frontend/getmetarowbyuserid?id="+r;jQuery.support.cors=!0;$.ajax({url:u,type:"GET",dataType:"json",headers:{Token:t},success:function(t){if(console.log("Meta",t),t.ProfilePhoto!==null&&t.ProfilePhoto!=="undefined"&&t.ProfilePhoto.trim().length>0?$("div.meta-profile-photo").html("<a href='"+n+t.ProfilePhoto+"' target='blank'><img src='"+n+t.ProfilePhoto+"' width='25px' height='25px'><\/img><\/a>"):$("div.meta-profile-photo").html(""),t.Gender!==null&&t.Gender!=="undefined"&&$("div.meta-gender").html(t.Gender),$("div.meta-age").html(t.Age),$("div.meta-weight-lose-goal").html(t.WeightLossGoal),$("div.meta-address").html(t.Address),$("div.meta-city").html(t.City),$("div.meta-province").html(t.State),$("div.meta-country").html(t.Country),t.ModifyDate!==null&&t.ModifyDate!=="undefined"){var r=t.ModifyDate.split("T");r!==null&&$("div.meta-modify-date").html(r[0]+" "+r[1])}i()},error:function(n){n.status===401&&basics.logout();$(".div-message").text("Something went wrong. Unable to fetch data.");i()}})}function e(r){$(".tr-tracker-editor .box-body").html("");var u=n+"api/frontend/gettrackerrowbyuserid?id="+r;jQuery.support.cors=!0;$.ajax({url:u,type:"GET",dataType:"json",headers:{Token:t},success:function(t){console.log("Trackers",t);var r="",u=1;$.each(t,function(){var o=this.ModifyDate,h="",c="",s=[],e,i,f;o!==null&&o!=="undefined"&&(s=o.split("T"),h=s[0],c=s[1]);r+="<p>";r+='<div class="row">';r+="<div><\/div>";r+="<div><h4>"+h+"<\/h4><\/div>";r+="<\/div>";r+="<\/p>";r+='<div class="row">';r+="<div>Current weight<\/div>";r+="<div>"+this.CurrentWeight+"<\/div>";r+="<\/div>";r+='<div class="row">';r+="<div>T-Shirt size<\/div>";r+="<div>";e=this.ShirtSize;e!==null&&e!=="null"&&e.length!==4&&(r+=e);r+="<\/div>";r+="<\/div>";r+='<div class="row">';r+="<div>Modify date<\/div>";r+=s!==null?"<div>"+h+" "+c+"<\/div>":"<div>"+o+"<\/div>";r+="<\/div>";r+='<div class="row">';r+="<div>Photo<\/div>";r+="<div class='div-photo'>";i=this.FrontImage;r+=i!==null&&i!=="null"&&i.trim().length>0&&i.length!==4?"<a href='"+n+i+"' target='blank'><img src='"+n+i+"'><\/img><\/a>":" ";f=this.SideImage;r+=f!==null&&f!=="null"&&f.trim().length>0&&f.length!==4?"<a href='"+n+f+"' target='blank'><img src='"+n+f+"'><\/img><\/a>":" ";r+="<\/div>";r+="<\/div>";r+='<div class="row">';r+="<div>Testimonial<\/div>";r+="<br>";r+="<div>";this.AboutJourney!==null&&this.AboutJourney!=="null"&&this.AboutJourney.length!==4&&(r+=this.AboutJourney);r+="<\/div>";r+="<\/div>";t.length>u&&(r+="<div class=\"row\" style='border-bottom:1px solid #EEE; margin-bottom:15px;'>",r+="<\/div>");u++});$(".tr-tracker-editor .box-body").html(r);i()},error:function(n){n.status===401&&basics.logout();$(".div-message").text("Something went wrong. Unable to fetch data.");i()}})}var n=basics.baseUrl,t=cookie.getCookie(cookie.tokenHeader);(t===null||t==="undefined"||t.trim().length===0)&&location.replace(n+"view/index.html");$("#date-submit").daterangepicker();$('input[type="checkbox"].minimal, input[type="radio"].minimal').iCheck({checkboxClass:"icheckbox_minimal-blue",radioClass:"iradio_minimal-blue"});$("button[type=submit]").click(function(){if($(this).hasClass("disabled")===!1){r();var n=$('input[type="checkbox"].minimal')[0],t=n.checked;u(t)}});$("button[type=submit]").click()});