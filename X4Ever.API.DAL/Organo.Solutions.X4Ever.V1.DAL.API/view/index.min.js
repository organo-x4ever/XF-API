$(function(){function f(){var n;s();c();var i=u+"api/AuthenticatePivot/authtoken",f=$("input[name=iusername]").val(),l=$("input[name=ipassword]").val();o()?(n="Basic "+h(f+":"+l),jQuery.support.cors=!0,$.ajax({url:i,type:"POST",dataType:"text",headers:{Authorization:n},success:function(n,t,i){var u=i.getResponseHeader("Token"),f;u!==null&&u!=="undefined"&&(f=cookie.toDate(i.getResponseHeader("TokenExpiry")),f>cookie.today()&&(cookie.setCookie(cookie.tokenHeader,u,f),e()));r()},error:function(n){n!==null&&n!==undefined&&n.status===401?t("You are not authorized"):t("Something went wrong. Unable to fetch data."+n);console.clear();r()}})):r()}function o(){var n=!0,i=$("input[name=iusername]").val(),r=$("input[name=ipassword]").val();return(i===null||i==="undefined"||i.trim().length===0)&&(n=!1,t("Username is required"),$("input[name=iusername]").parent().parent(".form-group").addClass("has-error")),(r===null||r==="undefined"||r.trim().length===0)&&(n=!1,t("Password is required"),$("input[name=ipassword]").parent().parent(".form-group").addClass("has-error")),n}function t(t){n.trim().length>0&&(n+="<br/>");n+=t;n.trim().length>0&&$(".div-message").html(n)}function s(){n="";$(".div-message").html(n)}function h(n){return window.btoa(n)}function c(){$("body").find("button[type=submit]").addClass("disabled");$("body").find("input[name=iusername]").addClass("disabled");$("body").find("input[name=ipassword]").addClass("disabled");$(".loading-results").removeClass("hide")}function r(){$("body").find("button[type=submit]").removeClass("disabled");$("body").find("input[name=iusername]").removeClass("disabled");$("body").find("input[name=ipassword]").removeClass("disabled");$(".loading-results").addClass("hide")}function e(){location.replace(u+"view/tracker_report_daterange.html")}var u=basics.baseUrl,i=cookie.getCookie(cookie.tokenHeader),n="";i!==null&&i!=="undefined"&&i.trim().length!==0&&e();$("body").each(function(){$(this).find("input").keypress(function(n){(n.which===10||n.which===13)&&f()})});$("body").find("button[type=submit]").click(function(){f()})});