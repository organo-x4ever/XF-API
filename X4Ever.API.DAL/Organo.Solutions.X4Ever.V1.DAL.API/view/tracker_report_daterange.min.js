$(function(){function e(){$("table[key=data-table] tbody").remove();$(".loading-results").removeClass("hide");$(".div-message").text("");$("button.button-search").addClass("disabled")}function r(){$(".loading-results").addClass("hide");$("button.button-search").removeClass("disabled")}function u(){var h,u,s,c;e();h="";$("#date-submit").val()!==null&&$("#date-submit").val()!=="undefined"&&(u=$("#date-submit").val(),u!==null&&u!=="undefined"&&u.length>0&&(s=u.split("-"),s.length===2&&(h="?fromDate="+s[0].trim()+"&toDate="+s[1].trim())));c=n+"api/frontend/gettrackerdetailasync";jQuery.support.cors=!0;$.ajax({url:c+h,type:"GET",dataType:"json",headers:{Token:t},success:function(t){i=t;var u=$("#example2").DataTable({data:i,retrieve:!1,paging:!0,lengthChange:!0,searching:!0,ordering:!0,info:!0,autoWidth:!0,search:!0,searchable:!0,pageLength:1e3,lengthMenu:[[25,50,100,500,1e3],[25,50,100,500,1e3]],order:[[4,"desc"]],columns:[{data:"FirstName"},{data:"CreateDate"},{data:"ApplicationName"},{data:"Address"},{data:"TrackerCreateDate"},{data:"StartWeight"},{data:"TShirtSize"},{data:"FrontPhoto"},{data:"Testimonials"}],columnDefs:[{targets:[0],render:function(n,t,i){var r;return r=n+" "+i.LastName,r+="<br/>",r+=i.EmailAddress,i.Gender!==null&&i.Gender!=="null"&&(r+="<br/>",r+=i.Gender),r}},{targets:[1],render:function(n,t,i){return i.CreateDate.split("T")[0]+" "+i.CreateDate.split("T")[1]}},{targets:[3],render:function(n,t,i){return i.Address+"<br/>"+i.City+"<br/>"+i.State+" "+i.PostalCode+"<br/>"+i.Country}},{targets:[4],render:function(n){return n.split("T")[0]+"<br>"+n.split("T")[1]}},{targets:[5],render:function(n,t,i){return"<b>Start: <\/b>"+n+i.WeightVolumeType+"<br/><b>To Lose: <\/b>"+i.WeightToLose+i.WeightVolumeType+"<br/><b>Goal Reached: <\/b>"+i.WeightGoalReached+i.WeightVolumeType+'<br/><b>Current:<\/b> <b style="color:green; width:50px;">'+i.WeeklyWeightLost+i.WeightVolumeType+"<\/b>"}},{targets:[6],render:function(n){return n!==null&&n!=="null"?n:""}},{targets:[7],render:function(t,i,r){return(r.FrontPhoto!==null&&r.FrontPhoto!=="null"?"<a href="+n+r.FrontPhoto+' target="_blank">Front Photo<\/a>':"")+(r.SidePhoto!==null&&r.SidePhoto!=="null"?"<br><a href="+n+r.SidePhoto+' target="_blank">Side Photo<\/a>':"")}},{targets:[8],render:function(n,t,i){return n!==null&&n!=="null"?'<a id="button-testimonial" class="btn button-search center button-testimonial" data-text='+i.ID+">Show<\/a>":""}}],tableTools:{aButtons:["copy","print",{sExtends:"collection",sButtonText:"Save",aButtons:["csv","xls","pdf"]}]},destroy:!0});$(".button-testimonial").click(function(){var n=$(this).data("text"),t=f(i,"ID",n);o(t[0])});r()},error:function(n){n.status===401?basics.logout():$(".div-message").text("Something went wrong. Unable to fetch data.");r()}})}function f(n,t,i){var r=[];for(var u in n)n.hasOwnProperty(u)&&(typeof n[u]=="object"?r=r.concat(f(n[u],t,i)):u===t&&n[t]===i&&r.push(n));return r}function o(n){var t=n.TrackerCreateDate.split("T")[0]+" "+n.TrackerCreateDate.split("T")[1];$(".modal-title").text(n.FirstName+" "+n.LastName+" "+t);$(".modal-body p").text(n.Testimonials);$("#model-testimonial").modal("show")}function s(n){var t=basics.currentDate();$("#date-submit").val(t+" - "+t);n()}var n=basics.baseUrl,t=cookie.getCookie(cookie.tokenHeader),i;(t===null||t==="undefined"||t.trim().length===0)&&location.replace(n+"view/index.html");$("#date-submit").daterangepicker();i=null;s(u);$("button[type=submit]").click(function(){$(this).hasClass("disabled")===!1&&u()})});