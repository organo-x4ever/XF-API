function ValidateSingleInput(n){if(data.fileValidate(n)){let t=n.value;data.fileExists=!1;for(let n=0;n<data._validFileExtensions.length;n++){let i=data._validFileExtensions[n];if(t.substr(t.length-i.length,i.length).toLowerCase()===i.toLowerCase()){data.fileExists=!0;break}}if(!data.fileExists)return data.alertError("Sorry, "+t+" is invalid, allowed extensions are: "+data._validFileExtensions.join(", ")),n.value="",!1}return!0}$(document).ready(function(){let n=data.getQueryString("token");$("input[name=token]").val(n);data.hideLoader();data.alertClear();$(".btn-feedback").click(function(n){data.displayInfo("btn-feedback","click");n.preventDefault();data.alertClear();data.validate()?(data.displayInfo("validate()","CHECK:TRUE"),data.upload(data.post)):(data.displayInfo("validate()","CHECK:FALSE"),data.alertError("Please provide some information to submit"),data.hideLoader())})});var data={baseUrl:"https://mapp.oghq.ca/",message:$("div[name=message]"),_validFileExtensions:[".jpg",".jpeg",".bmp",".gif",".png"],fullName:$("input[name=fullname]"),userEmail:$("input[name=useremail]"),experience:$("textarea[name=experience]"),comments:$("textarea[name=comments]"),attachedFile:$("input[name=attchedfile]"),inputAttachedFile:$("#inputFile"),allowAccess:$("input[name=allowaccess]"),inputToken:$("input[name=token]"),fileExists:!1,post:function(){data.displayInfo("posting...","data");let n={FullName:$(data.fullName).val(),Email:$(data.userEmail).val(),Experience:$(data.experience).val(),Comments:$(data.comments).val(),AttachedFileName:$(data.attachedFile).val(),AllowAccess:$(data.allowAccess).val(),Token:$(data.inputToken).val()};data.displayInfo("userFeedback:",n);let i=JSON.stringify(n);data.displayInfo("baseUrl:",data.baseUrl);let t=data.baseUrl+"api/logs/feedback";data.displayInfo("url:",t);jQuery.support.cors=!0;$.ajax({url:t,type:"POST",dataType:"json",contentType:"application/json",data:i,success:function(n){data.displayInfo("response:",n);n.indexOf("Success")>-1?(data.displayInfo("RESULT:","Posted"),data.alertSuccess("Thank you for your valuable feedback"),data.clearInput()):(data.displayInfo("RESULT:","Not Posted"),data.alertWarning("Your feedbacks are valuable for us. Try again later"));data.hideLoader()},error:function(n){data.displayInfo("x:",n);data.alertError(n.responseText);data.hideLoader()}})},upload:function(n){if(data.showLoader(),data.fileExists)if(data.inputAttachedFile.length>0)if(window.FormData!==undefined){var t=new FormData;t.append("file",$(data.inputAttachedFile)[0].files[0]);let i=data.baseUrl+"api/files/upload/web?postedFileName="+data.getDateAsString();$.ajax({url:i,type:"POST",data:t,cache:!1,contentType:!1,processData:!1,headers:{Token:$(data.inputToken).val()},success:function(t){if(data.displayInfo("RESULT:",t),t==="MessageFileUploadFailed")data.alertError("File upload failed");else if(t.indexOf("MessageErrorOccurred")>-1)data.alertError(t.replace("MessageErrorOccurred#",""));else if(t.indexOf("MAIN")>-1)data.alertError(t.replace("MAIN#",""));else if(t.indexOf("Success#")>-1){$(data.attachedFile).val(t.replace("Success#",""));n();return}data.hideLoader()},error:function(n,t,i,r){data.displayInfo("Error:",n,t,i,r);var u="Error  "+t+" "+i+" "+r;n.responseText&&n.responseText[0]==="{"&&(u=JSON.parse(n.responseText).Message);data.displayInfo("Error:",u)},complete:function(){},progress:function(){},beforeSend:function(){}})}else data.alertWarning("This browser doesn't support HTML5 file uploads!"),n();else n();else n()},clearInput:function(){$(data.fullName).val("");$(data.userEmail).val("");$(data.experience).val("");$(data.comments).val("");$(data.attachedFile).val("");$(data.allowAccess).val("")},getQueryString:function(n){let i=[],t,r=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(let n=0;n<r.length;n++)t=r[n].split("="),i.push(t[0]),i[t[0]]=t[1];return i[n]},removeQueryString:function(){history.pushState(null,"",location.href.split("?")[0])},showLoader:function(){$("body").find("#feedback").addClass("hidden");$(".loading-results").removeClass("hidden")},hideLoader:function(){$("body").find("#feedback").removeClass("hidden");$(".loading-results").addClass("hidden")},alertClear:function(){$(data.message).find("span").html("");$(data.message).removeClass("alert-danger");$(data.message).removeClass("alert-warning");$(data.message).removeClass("alert-info");$(data.message).removeClass("alert-success");$(data.message).find("h4").html("")},alertError:function(n){data.alertClear();$(data.message).find("span").html(n);$(data.message).addClass("alert-danger");$(data.message).find("h4").html('<i class="icon fa fa-ban"><\/i>Alert!')},alertWarning:function(n){data.alertClear();$(data.message).find("span").html(n);$(data.message).addClass("alert-warning");$(data.message).find("h4").html('<i class="icon fa fa-warning"><\/i>Warning!')},alertInfo:function(n){data.alertClear();$(data.message).find("span").html(n);$(data.message).addClass("alert-info");$(data.message).find("h4").html('<i class="icon fa fa-info"><\/i>Info!')},alertSuccess:function(n){data.alertClear();$(data.message).find("span").html(n);$(data.message).addClass("alert-success");$(data.message).find("h4").html('<i class="icon fa fa-check"><\/i>Success!')},displayInfo:function(){},fileValidate:function(n){if(data.displayInfo("fileValidate()","INSIDE"),n.type==="file"){let t=n.value;if(t.length>0)return data.displayInfo("fileValidate()","VALID"),!0}return data.displayInfo("fileValidate()","INVALID"),!1},validate:function(){return(data.displayInfo("validate()","INSIDE"),data.isNotNull(data.experience)||data.isNotNull(data.comments)||data.fileExists)?(data.displayInfo("validate()","VALID"),$(data.experience).parent("div").removeClass("has-error"),$(data.comments).parent("div").removeClass("has-error"),$(data.inputAttachedFile).parent("div").removeClass("has-error"),!0):(data.displayInfo("validate()","INVALID"),$(data.experience).parent("div").addClass("has-error"),$(data.comments).parent("div").addClass("has-error"),$(data.inputAttachedFile).parent("div").addClass("has-error"),!1)},getDateAsString:function(){var n=new Date;return data.addZero(n.getFullYear())+""+data.addZero(n.getMonth())+""+data.addZero(n.getDate())+""+data.addZero(n.getHours())+""+data.addZero(n.getMinutes())+""+data.addZero(n.getSeconds())+""+data.addZero(n.getMilliseconds())},addZero:function(n){return Number(n)<10?"0"+n:n},isNotNull:function(n){return(data.displayInfo("DATA:",$(n)),data.displayInfo("DATA.VALUE:",$(n).val()),data.displayInfo("isNotNull()","INSIDE"),$(n).val()!==undefined&&$(n).val()!==null&&data.isExist(n))?(data.displayInfo("isNotNull()","VALID"),!0):(data.displayInfo("isNotNull()","INVALID"),!1)},isExist:function(n){return(this.displayInfo("isExist()","INSIDE"),String($(n).val()).trim().length>0)?(this.displayInfo("isExist()","VALID"),!0):(this.displayInfo("isExist()","INVALID"),!1)}};